(()=>{"use strict";let e="dynamic-cache-v1",t="static-cache-v1",n="api-cache-v1";[{'revision':null,'url':'/_next/static/chunks/0e5ce63c-cef059fd27103ca5.js'},{'revision':null,'url':'/_next/static/chunks/1365-bbf87cb51fb34ac1.js'},{'revision':null,'url':'/_next/static/chunks/1547-e6053ec7899d7cdf.js'},{'revision':null,'url':'/_next/static/chunks/1889.60b6a9e058fb0955.js'},{'revision':null,'url':'/_next/static/chunks/2586-678d48499ddf4e09.js'},{'revision':null,'url':'/_next/static/chunks/3476-5613c0f1968adfa9.js'},{'revision':null,'url':'/_next/static/chunks/3845-909c779c7b59d2e4.js'},{'revision':null,'url':'/_next/static/chunks/4463-86cfe59dae66c6eb.js'},{'revision':null,'url':'/_next/static/chunks/447-952c370c08c721ee.js'},{'revision':null,'url':'/_next/static/chunks/4954-ff9de66cb700dcd2.js'},{'revision':null,'url':'/_next/static/chunks/4bd1b696-4bfe127980858766.js'},{'revision':null,'url':'/_next/static/chunks/5090-95bcf8bd3d1e4a63.js'},{'revision':null,'url':'/_next/static/chunks/5203.7c54c202406d4620.js'},{'revision':null,'url':'/_next/static/chunks/5215-c423fa8ced7d1aa0.js'},{'revision':null,'url':'/_next/static/chunks/6065-fdb6fb4266599f6b.js'},{'revision':null,'url':'/_next/static/chunks/6218.073ed43b85399d77.js'},{'revision':null,'url':'/_next/static/chunks/6edf0643-2ad1ab01fec89446.js'},{'revision':null,'url':'/_next/static/chunks/7078-b88937fdc26430db.js'},{'revision':null,'url':'/_next/static/chunks/814-36d80b484a1dd127.js'},{'revision':null,'url':'/_next/static/chunks/8173-05253e0ae3156a6d.js'},{'revision':null,'url':'/_next/static/chunks/8590-e112735f1be46cd7.js'},{'revision':null,'url':'/_next/static/chunks/8628-480245650a62e839.js'},{'revision':null,'url':'/_next/static/chunks/8827-4c125da0ff2aab49.js'},{'revision':null,'url':'/_next/static/chunks/8e1d74a4-6859ab5dbb140eda.js'},{'revision':null,'url':'/_next/static/chunks/9058-b3b36ff52eba9470.js'},{'revision':null,'url':'/_next/static/chunks/ad2866b8-e61efaab7b01bf9f.js'},{'revision':null,'url':'/_next/static/chunks/app/(protected)/admin/%5Bcollection%5D/%5Bid%5D/page-756e780d2ad1fd56.js'},{'revision':null,'url':'/_next/static/chunks/app/(protected)/admin/%5Bcollection%5D/page-b07c2768ad108b20.js'},{'revision':null,'url':'/_next/static/chunks/app/(protected)/admin/page-2973722b8c76303f.js'},{'revision':null,'url':'/_next/static/chunks/app/(protected)/client/page-396bd88b0a22c7a2.js'},{'revision':null,'url':'/_next/static/chunks/app/(protected)/nastaveni/page-7ae58849efe7e023.js'},{'revision':null,'url':'/_next/static/chunks/app/(protected)/server/page-5f141ee1e449a840.js'},{'revision':null,'url':'/_next/static/chunks/app/_not-found/page-3c9ededbb3e8d4f1.js'},{'revision':null,'url':'/_next/static/chunks/app/api/admin/%5Bcollection%5D/%5Bid%5D/route-f20fcfc7b2f99b73.js'},{'revision':null,'url':'/_next/static/chunks/app/api/admin/%5Bcollection%5D/route-08abaaa0b4ce4c6d.js'},{'revision':null,'url':'/_next/static/chunks/app/api/admin/route-0915867083bd1d76.js'},{'revision':null,'url':'/_next/static/chunks/app/api/auth/%5B...nextauth%5D/route-c4698d8d8671f280.js'},{'revision':null,'url':'/_next/static/chunks/app/api/contact/route-f268126d4d92b19b.js'},{'revision':null,'url':'/_next/static/chunks/app/api/news/%5Bid%5D/route-fd44ec424cb885c7.js'},{'revision':null,'url':'/_next/static/chunks/app/api/news/route-74ef53a2821cf776.js'},{'revision':null,'url':'/_next/static/chunks/app/api/results/%5Brok%5D/route-615533a8ff0ebc44.js'},{'revision':null,'url':'/_next/static/chunks/app/api/results/route-c681c8d752e4be97.js'},{'revision':null,'url':'/_next/static/chunks/app/api/saveTrack/route-823d18141330cc32.js'},{'revision':null,'url':'/_next/static/chunks/app/api/seasons/route-d92a2171201b73a7.js'},{'revision':null,'url':'/_next/static/chunks/app/api/user/results/%5Byear%5D/route-582710a7a8b7bd2e.js'},{'revision':null,'url':'/_next/static/chunks/app/api/user/results/route-ce48c56d25cef95b.js'},{'revision':null,'url':'/_next/static/chunks/app/auth/error/page-ccd88d099d9dc20a.js'},{'revision':null,'url':'/_next/static/chunks/app/auth/login/page-c1575d0dd0453b0f.js'},{'revision':null,'url':'/_next/static/chunks/app/auth/new-password/page-95554faa9914ea07.js'},{'revision':null,'url':'/_next/static/chunks/app/auth/new-verification/page-2c04997c1dc2c443.js'},{'revision':null,'url':'/_next/static/chunks/app/auth/profil/page-cd6c70177dd2bdb5.js'},{'revision':null,'url':'/_next/static/chunks/app/auth/register/page-02400f817abb6ceb.js'},{'revision':null,'url':'/_next/static/chunks/app/auth/reset/page-112be2ea6247cfc6.js'},{'revision':null,'url':'/_next/static/chunks/app/examples/generic-table/page-8ce7c7e3aedc7106.js'},{'revision':null,'url':'/_next/static/chunks/app/examples/inventory-sales/page-1e767154c2ebe4cd.js'},{'revision':null,'url':'/_next/static/chunks/app/examples/user-analytics/page-3da44577d83b1c36.js'},{'revision':null,'url':'/_next/static/chunks/app/fotogalerie/page-44802e2a2b4408e2.js'},{'revision':null,'url':'/_next/static/chunks/app/kontakty/page-6edffed95404c5b9.js'},{'revision':null,'url':'/_next/static/chunks/app/layout-b8fd4e1caa843276.js'},{'revision':null,'url':'/_next/static/chunks/app/offline-test/page-89ae57bc6fa3d366.js'},{'revision':null,'url':'/_next/static/chunks/app/offline/page-d3f98de5fca3c95b.js'},{'revision':null,'url':'/_next/static/chunks/app/page-32d6060754a1cb2a.js'},{'revision':null,'url':'/_next/static/chunks/app/playground/page-6881c1b16adfd6df.js'},{'revision':null,'url':'/_next/static/chunks/app/pravidla/page-37afcc7a69bbe6a6.js'},{'revision':null,'url':'/_next/static/chunks/app/vysledky/%5Brok%5D/page-d81be314ff55316a.js'},{'revision':null,'url':'/_next/static/chunks/app/vysledky/moje/page-c6ec5c1ecd87f12e.js'},{'revision':null,'url':'/_next/static/chunks/app/vysledky/page-8ea97da1231bc50b.js'},{'revision':null,'url':'/_next/static/chunks/d0deef33-e29d392a5d0e25f8.js'},{'revision':null,'url':'/_next/static/chunks/framework-9fe066fb31fb382b.js'},{'revision':null,'url':'/_next/static/chunks/main-app-b68480837fdfdd0d.js'},{'revision':null,'url':'/_next/static/chunks/main-b602123303583a0b.js'},{'revision':null,'url':'/_next/static/chunks/pages/_app-bfa3536d2730ca09.js'},{'revision':null,'url':'/_next/static/chunks/pages/_error-8b71684a1cf09722.js'},{'revision':'846118c33b2c0e922d7b3a7676f81f6f','url':'/_next/static/chunks/polyfills-42372ed130431b0a.js'},{'revision':null,'url':'/_next/static/chunks/webpack-6aaef35772a28c1c.js'},{'revision':null,'url':'/_next/static/css/512193394e2795da.css'},{'revision':null,'url':'/_next/static/css/857aa62baa17c894.css'},{'revision':null,'url':'/_next/static/css/e6c99aee071fcefc.css'},{'revision':'9f58b05b21186007be3fc2026f081817','url':'/_next/static/mQMPyRVjcWPr8V52wynFf/_buildManifest.js'},{'revision':'b6652df95db52feb4daf4eca35380933','url':'/_next/static/mQMPyRVjcWPr8V52wynFf/_ssgManifest.js'},{'revision':'42e6f3200852f7e3904128a093daab62','url':'/_next/static/media/dog_emoji.e0937497.png'},{'revision':'6515ed07ddb9cf07a618bc4fddb35bb8','url':'/_next/static/media/icon-192x192.afb6b95e.png'},{'revision':'f3e1571d0b50e6aac544afab0b14a5e8','url':'/_next/static/media/icon-512x512.093c7d8d.png'},{'revision':null,'url':'/_next/static/media/layers-2x.9859cd12.png'},{'revision':null,'url':'/_next/static/media/layers.ef6db872.png'},{'revision':'64e0ecd71b74e015c5952ddc781c4f43','url':'/_next/static/media/loginpagecover.9bc5d98f.webp'},{'revision':null,'url':'/_next/static/media/marker-icon.d577052a.png'},{'revision':'2b63eb473bc5727f1312c740216fb066','url':'/_next/static/media/pin_emoji.6bf5f927.png'},{'revision':'1c27f031d64b44fa2f468b5355b91df2','url':'/_next/static/media/strakataturistikabackground.f9219e0c.png'},{'revision':'307cd918f5fcff2cb4f219126b71ced6','url':'/_next/static/media/transparent-header-outline.c54f9054.png'},{'revision':'7f6c9a6f5e1da80f1beadb5f4f76564a','url':'/_next/static/media/transparent-header.c0500ca1.png'},{'revision':'6203d34b795977747c3b12d8db18e0d2','url':'/apple-icon-180.png'},{'revision':'ff295e4d52750da492e61eca21b63fc6','url':'/apple-splash-1125-2436.jpg'},{'revision':'fc81c967d5291a35b7c821fb1028ee31','url':'/apple-splash-1136-640.jpg'},{'revision':'329cd7d9a1b6e12f964b21e736db0d2b','url':'/apple-splash-1170-2532.jpg'},{'revision':'9a83aeb3a6595e80861668cba28d3466','url':'/apple-splash-1179-2556.jpg'},{'revision':'0e26ad4b713c041efe8d44e5d8c9c03a','url':'/apple-splash-1206-2622.jpg'},{'revision':'e7075a2569af068531761d1e9a6a1213','url':'/apple-splash-1242-2208.jpg'},{'revision':'1f9f743b21d34e3f6d06c0524344f71d','url':'/apple-splash-1242-2688.jpg'},{'revision':'4148a02bf10c79440d137c9ed8b92479','url':'/apple-splash-1284-2778.jpg'},{'revision':'fe269832b00881c59b7bbce3e2b73a5f','url':'/apple-splash-1290-2796.jpg'},{'revision':'d99f1edd7ae8b3bd1a8f3a573a62cf81','url':'/apple-splash-1320-2868.jpg'},{'revision':'f2c1f3897e62640b390e841f0df8cd1e','url':'/apple-splash-1334-750.jpg'},{'revision':'d1866c1aeb221eca6930aa664cc8bc45','url':'/apple-splash-1488-2266.jpg'},{'revision':'fcab1ec614a6a75d584a36226792e9a8','url':'/apple-splash-1536-2048.jpg'},{'revision':'18ad8ee95ba34fcb863ed65556e5f4b5','url':'/apple-splash-1620-2160.jpg'},{'revision':'a6005ea93280827df2f3f28aee9367f1','url':'/apple-splash-1640-2360.jpg'},{'revision':'7788e351d606354423d464fe9d06b416','url':'/apple-splash-1668-2224.jpg'},{'revision':'586fe8d1547885b4389ba4d0b19c3784','url':'/apple-splash-1668-2388.jpg'},{'revision':'b41cb1a523995d5ac1c056bba395dff1','url':'/apple-splash-1792-828.jpg'},{'revision':'4a94a2a80e64662f4c2a7cfc177ebca0','url':'/apple-splash-2048-1536.jpg'},{'revision':'96abac763d3e37ee18f84453f2503c02','url':'/apple-splash-2048-2732.jpg'},{'revision':'3a81e1d43c5bda7b5e4ac401cd70c634','url':'/apple-splash-2160-1620.jpg'},{'revision':'1092b3d07a0d2489104dcee680ddf88a','url':'/apple-splash-2208-1242.jpg'},{'revision':'d262ce88fce5507f7a917b9fb0cab20e','url':'/apple-splash-2224-1668.jpg'},{'revision':'16f1df441e9b6ec0899bff074b60c083','url':'/apple-splash-2266-1488.jpg'},{'revision':'915985ce020ed33eddd1750a60c8c3f3','url':'/apple-splash-2360-1640.jpg'},{'revision':'b599febd6b1a113be1dbf6b81d8b1765','url':'/apple-splash-2388-1668.jpg'},{'revision':'12f2c83ec1dc5dba9c943b580d1579c6','url':'/apple-splash-2436-1125.jpg'},{'revision':'3850a021f479b10cb2bf6de878fe9865','url':'/apple-splash-2532-1170.jpg'},{'revision':'83ff222848c9b2c30d02f2588a0e52e3','url':'/apple-splash-2556-1179.jpg'},{'revision':'9c3fd0328e7db940f2fdde3505a23737','url':'/apple-splash-2622-1206.jpg'},{'revision':'5d797c893195df2d4a2dd9bf58cd499c','url':'/apple-splash-2688-1242.jpg'},{'revision':'08423f70c25558e0e138cdd91d156ac6','url':'/apple-splash-2732-2048.jpg'},{'revision':'2d0787fb5c73688513b8bca6e3341d6f','url':'/apple-splash-2778-1284.jpg'},{'revision':'c3cda47cafdfac1c9e6fa0a3fe0e7841','url':'/apple-splash-2796-1290.jpg'},{'revision':'94eb362708fc8f58300a229132490a4e','url':'/apple-splash-2868-1320.jpg'},{'revision':'fb86eac6e17d8bd4a40c06de2f894d87','url':'/apple-splash-640-1136.jpg'},{'revision':'760f20fc038fb67bcf6accd2c7655fc2','url':'/apple-splash-750-1334.jpg'},{'revision':'35eb72eed1266a7321608e1ba1044cf5','url':'/apple-splash-828-1792.jpg'},{'revision':'0613906b6b696a6fd2d30a0cfb577eff','url':'/dev-sw.js'},{'revision':'0c6befe9ceab177dd9c8184660051ed0','url':'/favicon-196.png'},{'revision':'01af3a47c77ccda60de6d5fc185679c4','url':'/favicon.ico'},{'revision':'d09f95206c3fa0bb9bd9fefabfd0ea71','url':'/file.svg'},{'revision':'2aaafa6a49b6563925fe440891e32717','url':'/globe.svg'},{'revision':'42e6f3200852f7e3904128a093daab62','url':'/icons\\dog_emoji.png'},{'revision':'6515ed07ddb9cf07a618bc4fddb35bb8','url':'/icons\\icon-192x192.png'},{'revision':'f3e1571d0b50e6aac544afab0b14a5e8','url':'/icons\\icon-512x512.png'},{'revision':'7f284f1ed935b0d0bbbe4c489f7cafe4','url':'/icons\\start_flag.png'},{'revision':'307cd918f5fcff2cb4f219126b71ced6','url':'/icons\\transparent-header-outline.png'},{'revision':'7f6c9a6f5e1da80f1beadb5f4f76564a','url':'/icons\\transparent-header.png'},{'revision':'a4df511cfae1ccc2ed9593c0c1086f89','url':'/manifest-icon-192.maskable.png'},{'revision':'bdcb6eaf680dd8cb3d6ffeb7f41676fc','url':'/manifest-icon-512.maskable.png'},{'revision':'8e061864f388b47f33a1c3780831193e','url':'/next.svg'},{'revision':'31623248d2461aa5aff682ccc883c073','url':'/service-worker\\app-worker.js'},{'revision':'c0af2f507b369b085b35ef4bbe3bcf1e','url':'/vercel.svg'},{'revision':'f6a5aa3191b8018039256f9f1b81d0e0','url':'/vysledky\\vysledky2019.xlsx'},{'revision':'aadec764bb8c5c4e7bce9972d33ed85c','url':'/vysledky\\vysledky2021.xlsx'},{'revision':'ef4d45a8fb8957fe62be49bc5b3f1270','url':'/vysledky\\vysledky2022.xlsx'},{'revision':'5daac6f265ed882bd68db32499d056a9','url':'/vysledky\\vysledky2023.xlsx'},{'revision':'a2760511c65806022ad20adf74370ff3','url':'/window.svg'}];let c=["/","/vysledky","/pravidla","/offline","/fotogalerie","/kontakty"],a=["/manifest.webmanifest","/icons/icon-192x192.png","/icons/icon-512x512.png","/favicon.ico","/favicon-196.png"],r=()=>"onLine"in self&&!self.onLine,s=async e=>{if(r())return console.log("[Service Worker] Network is offline, skipping fetch"),Promise.reject(Error("Network is offline"));try{return await fetch(e)}catch(e){return console.error("[Service Worker] Fetch failed:",e),Promise.reject(e)}},o=async e=>{try{return await caches.match(e)||Promise.reject(Error("No cached response found"))}catch(e){return console.error("[Service Worker] Cache match failed:",e),Promise.reject(e)}},i=e=>new Response('<html>\n            <head>\n                <title>Offline</title>\n                <style>\n                    body {\n                        font-family: sans-serif;\n                        text-align: center;\n                        padding: 20px;\n                    }\n                    .error {\n                        max-width: 500px;\n                        margin: 0 auto;\n                        color: #666;\n                    }\n                </style>\n            </head>\n            <body>\n                <h1>Moment\xe1lně jste offline</h1>\n                <div class="error">\n                    <p>'.concat(e||"Požadovan\xfd obsah nen\xed k dispozici v offline režimu.","</p>\n                    <p>Zkontrolujte sv\xe9 připojen\xed k internetu a zkuste to znovu.</p>\n                </div>\n            </body>\n        </html>"),{status:503,statusText:"Service Unavailable",headers:new Headers({"Content-Type":"text/html","Cache-Control":"no-store"})}),l=()=>new Response("/* Empty script provided when offline */",{status:200,headers:new Headers({"Content-Type":"application/javascript","Cache-Control":"no-store"})}),h=()=>new Response("/* Empty CSS provided when offline */",{status:200,headers:new Headers({"Content-Type":"text/css","Cache-Control":"no-store"})}),p=()=>new Response(JSON.stringify({name:"Strakat\xe1 Turistika",short_name:"Strakat\xe1Turistika",icons:[{src:"/icons/icon-192x192.png",sizes:"192x192",type:"image/png"},{src:"/icons/icon-512x512.png",sizes:"512x512",type:"image/png"}],theme_color:"#ffffff",background_color:"#ffffff",start_url:"/",display:"standalone",orientation:"portrait",offline_enabled:!0}),{status:200,headers:new Headers({"Content-Type":"application/manifest+json","Cache-Control":"no-store"})}),f=e=>e.pathname.includes("/_next/static/chunks/")||e.pathname.includes("/_next/static/css/")||e.pathname.includes("/_next/static/media/");self.addEventListener("install",e=>{console.log("[Service Worker] Installing..."),e.waitUntil(caches.open(t).then(e=>{if(console.log("[Service Worker] Pre-caching important pages and resources"),r())return console.log("[Service Worker] Offline during install, skipping pre-cache"),Promise.resolve();{let t=[...c,...a];return e.addAll(t).catch(n=>(console.error("[Service Worker] Pre-caching failed:",n),Promise.all(t.map(t=>e.add(t).catch(e=>(console.error("[Service Worker] Failed to cache ".concat(t,":"),e),Promise.resolve()))))))}})),self.skipWaiting()}),self.addEventListener("activate",c=>{console.log("[Service Worker] Activating..."),c.waitUntil(caches.keys().then(c=>Promise.all(c.map(c=>c!==t&&c!==e&&c!==n?(console.log("[Service Worker] Removing old cache",c),caches.delete(c)):Promise.resolve()))).then(()=>(console.log("[Service Worker] Claiming clients..."),self.clients.claim())))}),self.addEventListener("fetch",c=>{let a=c.request,r=new URL(a.url);if((r.origin.includes(self.location.origin)||r.hostname.includes("tile.openstreetmap.org")||r.hostname.includes("server.arcgisonline.com"))&&"GET"===a.method){if(r.pathname.endsWith("/manifest.webmanifest")||r.pathname.endsWith("/manifest.json")){c.respondWith(o(a).then(e=>e||s(a).then(e=>{let n=e.clone();return caches.open(t).then(e=>{e.put(a,n).catch(e=>{console.error("[Service Worker] Failed to cache manifest:",e)})}),e}).catch(e=>(console.warn("[Service Worker] Manifest fetch failed:",e),p()))).catch(e=>(console.warn("[Service Worker] Manifest cache match failed:",e),p())));return}if(f(r)){c.respondWith(o(a).then(e=>e||s(a).then(e=>{if(!e||!e.ok)return e;let n=e.clone();return caches.open(t).then(e=>{e.put(a,n).catch(e=>{console.error("[Service Worker] Failed to cache Next.js chunk:",e)})}).catch(e=>{console.error("[Service Worker] Failed to open static cache:",e)}),e}).catch(e=>(console.warn("[Service Worker] Next.js chunk fetch failed:",e),r.pathname.endsWith(".js"))?l():r.pathname.endsWith(".css")?h():new Response("",{status:200}))).catch(e=>(console.warn("[Service Worker] Next.js chunk cache match failed:",e),r.pathname.endsWith(".js"))?l():r.pathname.endsWith(".css")?h():new Response("",{status:200})));return}if(r.pathname.startsWith("/api/")){c.respondWith(s(a).then(e=>{let t=e.clone();return caches.open(n).then(e=>{e.put(a,t)}),e}).catch(()=>o(a).catch(()=>new Response(JSON.stringify({error:!0,message:"Offline mode: API not available",offlineMode:!0}),{status:503,headers:new Headers({"Content-Type":"application/json","Cache-Control":"no-store"})}))));return}if("style"===a.destination||"script"===a.destination||"font"===a.destination){c.respondWith(o(a).then(e=>e||s(a).then(e=>{let n=e.clone();return caches.open(t).then(e=>{e.put(a,n).catch(e=>{console.error("[Service Worker] Failed to cache static asset:",e)})}).catch(e=>{console.error("[Service Worker] Failed to open static cache:",e)}),e}).catch(e=>(console.warn("[Service Worker] Failed to fetch static asset:",e),"script"===a.destination)?l():"style"===a.destination?h():i("Statick\xfd soubor nen\xed k dispozici offline"))).catch(e=>(console.warn("[Service Worker] Static asset cache match failed:",e),"script"===a.destination)?l():"style"===a.destination?h():i("Statick\xfd soubor nen\xed k dispozici offline")));return}if("navigate"===a.mode){c.respondWith(s(a).then(t=>{let n=t.clone();return caches.open(e).then(e=>{e.put(a,n)}),d(t.clone()),t}).catch(()=>o(a).then(e=>e||o("/offline").catch(()=>i("Str\xe1nka nen\xed k dispozici offline"))).catch(()=>i("Str\xe1nka nen\xed k dispozici offline"))));return}c.respondWith(o(a).then(e=>e||s(a).catch(e=>{console.warn("[Service Worker] Default handler fetch failed:",e,a.url);let t=r.pathname.split(".").pop();return"js"===t||"script"===a.destination?l():"css"===t||"style"===a.destination?h():(console.log("[Service Worker] Default handler returning generic fallback (network failed):",a.url),i("Obsah nen\xed k dispozici offline"))})).catch(e=>(console.warn("[Service Worker] Default handler cache match failed, attempting network fetch:",e,a.url),s(a).catch(e=>{console.warn("[Service Worker] Default handler fallback fetch also failed:",e,a.url);let t=r.pathname.split(".").pop();return"js"===t||"script"===a.destination?l():"css"===t||"style"===a.destination?h():(console.log("[Service Worker] Default handler returning generic fallback (cache miss + network failed):",a.url),i("Obsah nen\xed k dispozici offline"))}))))}});let d=async e=>{try{let n=await e.text(),c=await caches.open(t),a=[...n.matchAll(/(href|src)=["']([^"']*\/_next\/static\/[^"']*(\.js|\.css))["']/g)];[...new Set(a.map(e=>e[2]))].forEach(e=>{e.startsWith("http")||(e=new URL(e,self.location.origin).href),fetch(e).then(t=>{t.ok&&c.put(e,t).catch(e=>{console.error("[Service Worker] Failed to cache dependent resource:",e)})}).catch(e=>{console.warn("[Service Worker] Failed to fetch dependent resource:",e)})})}catch(e){console.error("[Service Worker] Error caching dependent resources:",e)}};self.addEventListener("message",a=>{let s=a.data;if(s)switch(s.type){case"CACHE_ALL_PAGES":let o=s.pages||c;if(r()){self.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage({type:"CACHE_COMPLETE",success:!1,message:"Cannot cache pages while offline"})})});return}let i=async t=>{try{if(r()){console.log("[Service Worker] Offline, skipping recursive caching");return}let n=await fetch(t);if(!n.ok){console.error("[Service Worker] Failed to fetch page for recursive cache: ".concat(t," (").concat(n.status,")"));return}let c=n.clone(),a=await caches.open(e);await a.put(t,n),await d(c)}catch(e){console.error("[Service Worker] Failed to recursively cache page: ".concat(t),e)}};Promise.all(o.map(e=>i(e))).then(()=>{self.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage({type:"CACHE_COMPLETE",success:!0})})})}).catch(e=>{console.error("[Service Worker] Cache all pages failed:",e),self.clients.matchAll().then(t=>{t.forEach(t=>{t.postMessage({type:"CACHE_COMPLETE",success:!1,message:e.message})})})});break;case"CLEAR_ALL_CACHE":caches.keys().then(c=>{Promise.all(c.map(e=>caches.delete(e))).then(()=>Promise.all([caches.open(t),caches.open(e),caches.open(n)])).then(()=>{self.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage({type:"CACHE_CLEARED",success:!0})})})}).catch(e=>{console.error("[Service Worker] Clear cache failed:",e),self.clients.matchAll().then(t=>{t.forEach(t=>{t.postMessage({type:"CACHE_CLEARED",success:!1,message:e.message})})})})});break;case"RECURSIVE_CACHE_PAGE":s.url&&(async t=>{try{if(r()){console.log("[Service Worker] Offline, skipping recursive caching");return}let n=await fetch(t);if(!n.ok){console.error("[Service Worker] Failed to fetch page for recursive cache: ".concat(t," (").concat(n.status,")"));return}let c=n.clone(),a=await caches.open(e);await a.put(t,n),await d(c)}catch(e){throw console.error("[Service Worker] Failed to recursively cache page: ".concat(t),e),e}})(s.url).then(()=>{self.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage({type:"RECURSIVE_CACHE_COMPLETE",url:s.url,success:!0})})})}).catch(e=>{console.error("[Service Worker] Recursive cache failed:",e),self.clients.matchAll().then(t=>{t.forEach(t=>{t.postMessage({type:"RECURSIVE_CACHE_COMPLETE",url:s.url,success:!1,message:e.message})})})});break;case"REQUEST_CACHED_PAGES":caches.keys().then(e=>Promise.all(e.map(e=>caches.open(e).then(e=>e.keys()).then(e=>e.map(e=>e.url)).catch(()=>[])))).then(e=>{let t=[...new Set([].concat(...e))];self.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage({type:"UPDATE_CACHED_PAGES",pages:t})})})}).catch(e=>{console.error("[Service Worker] Request cached pages failed:",e),self.clients.matchAll().then(t=>{t.forEach(t=>{t.postMessage({type:"UPDATE_CACHED_PAGES",pages:[],error:e.message})})})});break;case"REQUEST_CACHED_ENDPOINTS":caches.keys().then(e=>Promise.all(e.map(e=>caches.open(e).then(e=>e.keys()).then(e=>e.map(e=>e.url).filter(e=>e.includes("/api/"))).catch(()=>[])))).then(e=>{let t=[...new Set([].concat(...e))];self.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage({type:"UPDATE_CACHED_API_ENDPOINTS",endpoints:t,timestamp:Date.now()})})})}).catch(e=>{console.error("[Service Worker] Request cached endpoints failed:",e),self.clients.matchAll().then(t=>{t.forEach(t=>{t.postMessage({type:"UPDATE_CACHED_API_ENDPOINTS",endpoints:[],timestamp:Date.now(),error:e.message})})})})}})})();